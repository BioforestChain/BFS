(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const m=Worker;class i extends EventTarget{constructor(){super(...arguments),this.closed=!1,this.beforeStart=[]}start(){const t=this.beforeStart;if(t){this.beforeStart=void 0;for(const[s,e]of t)this.dispatchMessageEvent(s,e);this.addEventListener=super.addEventListener.bind(this)}}postMessage(t,s){if(!this.closed){if(this.remote.beforeStart){this.remote.beforeStart.push([t,s]);return}this.remote.dispatchMessageEvent(t,s)}}dispatchMessageEvent(t,s){const e=s?.filter(n=>n instanceof MessagePort)??[];this.dispatchEvent(new MessageEvent("message",{data:t,ports:e}))}addEventListener(t,s,e){super.addEventListener(t,s,e),this.start()}close(){this.closed||(this.closed=!0,this.remote.close())}}class p{constructor(t){this.mockChannel=(()=>{const n=new i,o=new i;return n.remote=o,o.remote=n,[n,o]})(),this.toWorkerPort=this.mockChannel[0],this.toMainPort=this.mockChannel[1],this.postMessage=this.toWorkerPort.postMessage.bind(this.toWorkerPort),this.addEventListener=this.toWorkerPort.addEventListener.bind(this.toWorkerPort);const s=(Date.now()+Math.random()).toString(36),e=this.script=document.createElement("script");debugger;e.dataset.workerId=s,e.type="module",e.async=!0,document.head.appendChild(e),e.src=t,Object.assign(window,{Worker:m,[s]:this})}}function u(r){if(typeof r.transferControlToOffscreen!="function"){const t=r;t.convertToBlob=e=>new Promise((n,o)=>{r.toBlob(c=>{c?n(c):o()},e?.type,e?.quality)});let s=!1;r.transferControlToOffscreen=()=>{if(s)return t;s=!0;const e=document.createElement("div");return e.appendChild(r),document.body.appendChild(e),e.style.pointerEvents="none",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0",e.style.opacity="0",delete r.transferControlToOffscreen,t},Object.assign(window,{Worker:p})}}const h="ZnVuY3Rpb24gcHJlcGFyZUluV29ya2VyKGEpe2lmKHR5cGVvZiB3aW5kb3chPSJvYmplY3QiKXJldHVybnt0b01haW5DaGFubmVsOnNlbGYsaXNXb3JrZXI6ITB9O3tjb25zdCBlPWRvY3VtZW50LmN1cnJlbnRTY3JpcHQ/P1tdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiW2RhdGEtd29ya2VyLWlkXSIpKS5maW5kKHI9PnIuc3JjPT1hKSx0PWUuZGF0YXNldC53b3JrZXJJZDtkZWxldGUgZS5kYXRhc2V0LndvcmtlcklkO2NvbnN0IG89d2luZG93W3RdO3JldHVybiBkZWxldGUgd2luZG93W3RdLHt0b01haW5DaGFubmVsOm8udG9NYWluUG9ydCxpc1dvcmtlcjohMX19fWNvbnN0e3RvTWFpbkNoYW5uZWwsaXNXb3JrZXJ9PXByZXBhcmVJbldvcmtlcihpbXBvcnQubWV0YS51cmwpOyhhc3luYygpPT57bGV0IHdzVXJsPW51bGwscHJveHlVcmw9bnVsbDtjb25zdCBjYW52YXM9YXdhaXQgbmV3IFByb21pc2UoYT0+dG9NYWluQ2hhbm5lbC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixlPT57Y29uc3R7Y2FudmFzOnQsd2lkdGg6byxoZWlnaHQ6cix3c1VybDpuLHByb3h5VXJsOnN9PWUuZGF0YTt0LndpZHRoPW8sdC5oZWlnaHQ9cixhKHQpLHdzVXJsPW58fG51bGwscHJveHlVcmw9c3x8bnVsbH0se29uY2U6ITB9KSksY3R4PWNhbnZhcy5nZXRDb250ZXh0KCIyZCIpLHdyYXBVcmxCeVByb3h5PWE9PntpZighcHJveHlVcmx8fCFhLnN0YXJ0c1dpdGgoImh0dHAiKSlyZXR1cm4gYTtjb25zdCBlPW5ldyBVUkwocHJveHlVcmwpO3JldHVybiBlLnNlYXJjaFBhcmFtcy5zZXQoInVybCIsYSksZS5ocmVmfSxmZXRjaEltYWdlQml0bWFwPWFzeW5jKGEsZSx0KT0+e2NvbnN0IG89YXdhaXQgZmV0Y2goYSxlKS50aGVuKG49Pm4uYmxvYigpKTtyZXR1cm4gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAobyx0KX0sY2FudmFzVG9EYXRhVVJMPWFzeW5jKGEsZSk9PiJ0b0RhdGFVUkwiaW4gYT9hd2FpdCBhLnRvRGF0YVVSTChlPy50eXBlLGU/LnF1YWxpdHkpOmF3YWl0IGJsb2JUb0RhdGFVUkwoYXdhaXQgYS5jb252ZXJ0VG9CbG9iKGUpKSxibG9iVG9EYXRhVVJMPWE9Pm5ldyBQcm9taXNlKChlLHQpPT57Y29uc3Qgbz1uZXcgRmlsZVJlYWRlcjtvLm9ubG9hZD0oKT0+ZShvLnJlc3VsdCksby5vbmVycm9yPXQsby5yZWFkQXNEYXRhVVJMKGEpfSksQXN5bmNGdW5jdGlvbj1ldmFsKCIoYXN5bmMoKT0+e30pLmNvbnN0cnVjdG9yIiksZXZhbENvZGU9YXN5bmMoYSxlLHQpPT57dHJ5e2NvbnN0IG89YXdhaXQgbmV3IEFzeW5jRnVuY3Rpb24oImNhbnZhcyxjdHgsZmV0Y2hJbWFnZUJpdG1hcCxibG9iVG9EYXRhVVJMLGNhbnZhc1RvRGF0YVVSTCx3cmFwVXJsQnlQcm94eSIsZSkoY2FudmFzLGN0eCxmZXRjaEltYWdlQml0bWFwLGJsb2JUb0RhdGFVUkwsY2FudmFzVG9EYXRhVVJMLHdyYXBVcmxCeVByb3h5KTt0KHZvaWQgMCxhLnZvaWQ/dm9pZCAwOmEuanNvbmlmeT9KU09OLnN0cmluZ2lmeShvKTpTdHJpbmcobykpfWNhdGNoKG8pe2NvbnNvbGUuZXJyb3IoZSxvKSx0KFN0cmluZyhvKSx2b2lkIDApfX07aWYoT2JqZWN0LmFzc2lnbihzZWxmLHtldmFsQ29kZSxjYW52YXMsY3R4LGZldGNoSW1hZ2VCaXRtYXAsYmxvYlRvRGF0YVVSTCxjYW52YXNUb0RhdGFVUkwsd3JhcFVybEJ5UHJveHl9KSx3c1VybCl7Y29uc3QgYT1uZXcgV2ViU29ja2V0KHdzVXJsKTthLm9ubWVzc2FnZT1hc3luYyBlPT57Y29uc3QgdD1KU09OLnBhcnNlKGUuZGF0YSk7YXdhaXQgZXZhbENvZGUoe3ZvaWQ6dC5yZXN1bHRWb2lkLGpzb25pZnk6dC5yZXN1bHRKc29uSWZ5fSx0LnJ1bkNvZGUsKG8scik9PnthLnNlbmQoSlNPTi5zdHJpbmdpZnkoe3JpZDp0LnJpZCxlcnJvcjpvLHN1Y2Nlc3M6cn0pKX0pfX1lbHNle2NvbnNvbGUubG9nKCJzdGFydCB0ZXN0cyIpO2NvbnN0IGE9YXN5bmMoKT0+KGNhbnZhcy53aWR0aD0zMDAsY2FudmFzLmhlaWdodD0zMDAse3dpZHRoOmNhbnZhcy53aWR0aCxoZWlnaHQ6Y2FudmFzLmhlaWdodH0pLGU9YXN5bmMoKT0+e2NvbnN0IHQ9YXdhaXQgZmV0Y2hJbWFnZUJpdG1hcCgiaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy81LzU1L0pvaG5fV2lsbGlhbV9XYXRlcmhvdXNlX0FfTWVybWFpZC5qcGciKTtyZXR1cm4gY3R4LmRyYXdJbWFnZSh0LDAsMCksYXdhaXQgY2FudmFzVG9EYXRhVVJMKGNhbnZhcyl9O2Zvcihjb25zdFt0LG9db2YgbmV3IE1hcChbW2Ese3ZvaWQ6ITEsanNvbmlmeTohMH1dLFtlLHt2b2lkOiExLGpzb25pZnk6ITF9XV0pKWF3YWl0IGV2YWxDb2RlKG8sdC50b1N0cmluZygpLm1hdGNoKC9ceyhbXHdcV10rKVx9LylbMV0sKHIsbik9PnI/Y29uc29sZS5lcnJvcih0Lm5hbWUscik6Y29uc29sZS5sb2codC5uYW1lLG4pKX19KSgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpOwo=",a=typeof window<"u"&&window.Blob&&new Blob(["URL.revokeObjectURL(import.meta.url);"+atob(h)],{type:"text/javascript;charset=utf-8"});function W(r){let t;try{if(t=a&&(window.URL||window.webkitURL).createObjectURL(a),!t)throw"";const s=new Worker(t,{type:"module",name:r?.name});return s.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(t)}),s}catch{return new Worker("data:application/javascript;base64,"+h,{type:"module",name:r?.name})}}const l=document.createElement("canvas");u(l);const Y=new W,b=l.transferControlToOffscreen(),d=new URLSearchParams(location.search);Y.postMessage({canvas:b,width:parseInt(d.get("width")||"")||l.clientWidth,height:parseInt(d.get("height")||"")||l.clientHeight,wsUrl:d.get("channel"),proxyUrl:d.get("proxy")},[b]);
