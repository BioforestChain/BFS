(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&e(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const h=Worker;class d extends EventTarget{constructor(){super(...arguments),this.closed=!1,this.beforeStart=[]}start(){const r=this.beforeStart;if(r){this.beforeStart=void 0;for(const[o,e]of r)this.dispatchMessageEvent(o,e);this.addEventListener=super.addEventListener.bind(this)}}postMessage(r,o){if(!this.closed){if(this.remote.beforeStart){this.remote.beforeStart.push([r,o]);return}this.remote.dispatchMessageEvent(r,o)}}dispatchMessageEvent(r,o){const e=o?.filter(t=>t instanceof MessagePort)??[];this.dispatchEvent(new MessageEvent("message",{data:r,ports:e}))}addEventListener(r,o,e){super.addEventListener(r,o,e),this.start()}close(){this.closed||(this.closed=!0,this.remote.close())}}class u{constructor(r){this.mockChannel=(()=>{const t=new d,s=new d;return t.remote=s,s.remote=t,[t,s]})(),this.toWorkerPort=this.mockChannel[0],this.toMainPort=this.mockChannel[1],this.postMessage=this.toWorkerPort.postMessage.bind(this.toWorkerPort),this.addEventListener=this.toWorkerPort.addEventListener.bind(this.toWorkerPort);const o=(Date.now()+Math.random()).toString(36),e=this.script=document.createElement("script");debugger;e.dataset.workerId=o,e.type="module",e.async=!0,document.head.appendChild(e),e.src=r,Object.assign(window,{Worker:h,[o]:this})}}function p(n){if(typeof n.transferControlToOffscreen!="function"){const r=n;r.convertToBlob=e=>new Promise((t,s)=>{n.toBlob(i=>{i?t(i):s()},e?.type,e?.quality)});let o=!1;n.transferControlToOffscreen=()=>{if(o)return r;o=!0;const e=document.createElement("div");return e.appendChild(n),document.body.appendChild(e),e.style.pointerEvents="none",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0",e.style.opacity="0",delete n.transferControlToOffscreen,r},Object.assign(window,{Worker:u})}}function m(){return new Worker("/assets/worker-efb6df68.js",{type:"module"})}const a=document.createElement("canvas");p(a);const l=new m,f=a.transferControlToOffscreen(),c=new URLSearchParams(location.search);l.postMessage({canvas:f,width:parseInt(c.get("width")||"")||a.clientWidth,height:parseInt(c.get("height")||"")||a.clientHeight,wsUrl:c.get("channel"),proxyUrl:c.get("proxy")},[f]);Object.assign(self,{worker:l});
