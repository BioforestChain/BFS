<!DOCTYPE html>
<html lang="en">

<head>
  <title></title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

</body>
<script>
  if (navigator.serviceWorker) {
    navigator.serviceWorker.register('injectWebView/serviceWorker.js').then(function (registration) {
      console.log('service worker 注册成功');
    }).catch(function (err) {
      console.log('service worker 注册失败', err)
    });
  }
  onmessage = function (e) {
    console.log("kotlin#index port1111", e.data, e.ports[0], e.data[0] == "forward-to-service-worker")
    if (e.data[0] == "forward-to-service-worker") {
      navigator.postMessage(["ipc-channel", e.ports[0]], [e.ports[0]])
    }
  }
</script>

</html>
