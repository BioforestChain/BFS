import{d as b,r as k,c as m,b as p,a as L,h as j,T,g as f,F as C,i as M,n as E,j as P}from"./index.37913e46.js";const I={class:"mockup-code text-xs min-w-full w-full"},O={class:"max-h-[60vh] overflow-y-auto overflow-x-clip flex flex-col-reverse"},$=p("div",{class:"anchor"},null,-1),B=["data-prefix"],N=["innerHTML"],z={class:"actions pt-5 pr-5 flex justify-end"},F=l=>l.value,A=l=>{const t=[];for(const n of l)P(n)?t.push(n.value):t.push(n);return t},H=(l,t)=>{const n=()=>A(t.args);return async(...u)=>{const a=t.logPanel.value||console;a.time(t.name,...n());try{const r=await l(...u);return a.timeEnd(t.name,...n(),'<span class="px-1 text-[0.6rem] rounded-lg bg-accent text-accent-content shrink-0">-></span>',r),r}catch(r){a.timeEnd(t.name,...n()),a.error(t.name,r)}}},S=b({__name:"LogPanel",setup(l,{expose:t}){const n=k(new Map);let u=1;const a=(s,e=u++)=>(n.value.set(e,s),e),r=(...s)=>s.map(e=>{if(typeof e=="object"&&e!==null){if(Object.getPrototypeOf(e)===Object.prototype)try{return`<span class="text-blue">${JSON.stringify(e)}</span>`}catch{}else if(e instanceof Error)return`<span class="text-red">${e.stack||e.message}</span>`}return String(e)}).join(" "),x=(...s)=>{const e=r(...s);a({message:e,type:"debug",prefix:"~",class:""})},g=(...s)=>{const e=r(...s);a({message:e,type:"error",prefix:">",class:"text-error"})},_=(...s)=>{const e=r(...s);a({message:e,type:"warn",prefix:">",class:"text-warning"})},y=(...s)=>{const e=r(...s);a({message:e,type:"success",prefix:">",class:"text-success"})},h=(...s)=>{const e=r(...s);a({message:e,type:"info",prefix:">",class:"text-info"})},i=new Map,w=(s,...e)=>{if(i.has(s))return;const o=a({message:r(s,...e),type:"info",prefix:".",class:"bg-accent text-accent-content"}),c=Date.now();i.set(s,{startTime:c,msgId:o})},v=(s,...e)=>{const o=i.get(s);if(o){const c=Date.now();i.delete(s),n.value.delete(o.msgId),a({message:r(s,...e)+` <span class="px-1 text-[0.6rem] rounded-lg bg-accent text-accent-content shrink-0">+${(c-o.startTime)/1e3}ms</span>`,type:"info",prefix:".",class:"text-accent"},o.msgId)}},d=()=>{i.clear(),n.value.clear()};return t({log:x,debug:x,warn:_,success:y,error:g,info:h,time:w,timeEnd:v,clear:d}),(s,e)=>(f(),m("div",I,[p("div",O,[$,L(T,{name:"fade"},{default:j(()=>[(f(!0),m(C,null,M(n.value,([o,c])=>(f(),m("pre",{key:o,"data-prefix":o+c.prefix,class:E(["whitespace-normal flex flex-row justify-start py-1",c.class])},[p("code",{class:"flex-1 break-all flex flex-wrap justify-between flex-row",innerHTML:c.message},null,8,N)],10,B))),128))]),_:1})]),p("div",z,[p("button",{class:"btn btn-sm btn-outline btn-primary",onClick:e[0]||(e[0]=o=>d())},"Clear Log")])]))}});export{S as _,H as d,F as t};
