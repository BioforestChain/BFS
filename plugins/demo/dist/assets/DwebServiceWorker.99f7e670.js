import{_ as k}from"./splashscreen.ecee76e9.js";import{d as w,r as _,o as C,az as o,c as D,b as t,u as n,av as f,a as h,F as y,g as E}from"./index.996ff647.js";import{t as F,_ as S,d as r}from"./LogPanel.ce2f93b3.js";const W={class:"card glass"},B={class:"card-body"},P=t("h2",{class:"card-title"},"\u4E0B\u8F7D\u6D4B\u8BD5",-1),L={class:"justify-end card-actions"},x=["value"],j={class:"stat"},A=t("div",{class:"stat-figure text-secondary"},[t("div",{class:"avatar online"},[t("div",{class:"w-16 rounded-full"},[t("img",{src:"https://www.bfmeta.org/imgs/logo_1000.webp"})])])],-1),$={class:"stat-value"},N=t("div",{class:"stat-title"},"download Task runing",-1),V={class:"stat-desc text-secondary"},q={class:"card-body"},z=t("h2",{class:"card-title"},"APP \u5173\u95ED\u3001\u91CD\u542F",-1),G={class:"justify-end card-actions btn-group"},I={class:"card-body"},M=t("h2",{class:"card-title"},"\u4E0B\u8F7D\u63A7\u5236\u5668\uFF1A \u6682\u505C/\u91CD\u4E0B/\u53D6\u6D88",-1),O={class:"justify-end card-actions btn-group"},T=t("div",{class:"divider"},"LOG",-1),U=w({__name:"DwebServiceWorker",setup(H){const l=_();let a;const d=_(0);C(async()=>{a=F(l),o.addEventListener("updatefound",e=>{a.log("Dweb Service Worker update found!",e)}),o.addEventListener("fetch",async e=>{a.log("Dweb Service Worker fetch!",e.clientId);const s=await fetch(e.request);return a.log("Dweb Service Worker fetch response=>",s),e.respondWith(s)}),o.addEventListener("onFetch",e=>{a.log("Dweb Service Worker onFetch!",e)});const c=o.update;c.addEventListener("start",e=>{a.log("Dweb Service Worker updateContoller start =>",e)}),c.addEventListener("end",e=>{a.log("Dweb Service Worker updateContoller end =>",e)}),c.addEventListener("progress",e=>{d.value=parseFloat(e),a.log("Dweb Service Worker updateContoller progress =>",e,parseFloat(e))}),c.addEventListener("cancel",e=>{a.log("Dweb Service Worker updateContoller cancel =>",e)})});const i=r(async()=>await o.close(),{name:"close",args:[],logPanel:l}),u=r(async()=>await o.restart(),{name:"restart",args:[],logPanel:l}),b=r(async()=>await o.updateContoller.pause(),{name:"pause",args:[],logPanel:l}),p=r(async()=>await o.updateContoller.resume(),{name:"resume",args:[],logPanel:l}),g=r(async()=>await o.updateContoller.cancel(),{name:"cancel",args:[],logPanel:l}),v=r(async()=>await o.updateContoller.download("https://shop.plaoc.com/bfs-metadata.json"),{name:"cancel",args:[],logPanel:l}),m="Dweb Service Worker";return(c,e)=>(E(),D(y,null,[t("div",W,[t("figure",{class:"icon"},[t("img",{src:k,alt:m})]),t("article",B,[P,t("div",L,[t("button",{class:"inline-block rounded-full btn btn-accent",onClick:e[0]||(e[0]=(...s)=>n(v)&&n(v)(...s))},"\u4E0B\u8F7D\u65B0\u7248\u672C")]),t("div",null,[t("progress",{class:"w-56 progress progress-accent",value:d.value,max:"100"},null,8,x),t("div",j,[A,t("div",$,f(d.value)+"%",1),N,t("div",V,f(100-d.value)+" tasks remaining",1)])])]),t("article",q,[z,t("div",G,[t("button",{class:"inline-block rounded-full btn btn-accent",onClick:e[1]||(e[1]=(...s)=>n(i)&&n(i)(...s))},"close"),t("button",{class:"inline-block rounded-full btn btn-accent",onClick:e[2]||(e[2]=(...s)=>n(u)&&n(u)(...s))},"restart")])]),t("article",I,[M,t("div",O,[t("button",{class:"inline-block rounded-full btn btn-accent",onClick:e[3]||(e[3]=(...s)=>n(b)&&n(b)(...s))},"pause"),t("button",{class:"inline-block rounded-full btn btn-accent",onClick:e[4]||(e[4]=(...s)=>n(p)&&n(p)(...s))},"resume"),t("button",{class:"inline-block rounded-full btn btn-accent",onClick:e[5]||(e[5]=(...s)=>n(g)&&n(g)(...s))},"cancel")])])]),T,h(S,{ref_key:"$logPanel",ref:l},null,512)],64))}});export{U as default};
